{"version":3,"sources":["matrix-2d.ts","vector-2d.ts","corner.ts","draggable.ts","draggable-fold.ts","draggable-zoom.ts","flipper-hash.ts","fold.ts","flipper.ts"],"names":[],"mappings":"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","file":"flipper.js","sourcesContent":["class Matrix2D {\r\n\r\n    private m: number[];\r\n\r\n    constructor(elements?: number[]) {\r\n        this.m = elements || [1, 0, 0, 0, 1, 0, 0, 0, 1];\r\n    }\r\n\r\n    public transformVector(v: Vector2D) : Vector2D {\r\n        var m = this.m;\r\n        return new Vector2D(\r\n            v.x * m[0] + v.y * m[3] + m[6],\r\n            v.x * m[1] + v.y * m[4] + m[7]\r\n        );\r\n    }\r\n\r\n    public determinant() {\r\n        var m = this.m;\r\n        var ax = m[0];\r\n        var ay = m[1];\r\n        var az = m[2];\r\n        var bx = m[3];\r\n        var by = m[4];\r\n        var bz = m[5];\r\n        var cx = m[6];\r\n        var cy = m[7];\r\n        var cz = m[8];\r\n\r\n        var dx = by * cz - bz * cy;\r\n        var dy = bz * cx - bx * cz;\r\n        var dz = bx * cy - by * cx;\r\n        return ax * dx + ay * dy + az * dz;\r\n    }\r\n\r\n    private multiplyArray(other: number[]) {\r\n        var m = this.m;\r\n        return new Matrix2D([\r\n            m[0] * other[0] + m[1] * other[3] + m[2] * other[6],\r\n            m[0] * other[1] + m[1] * other[4] + m[2] * other[7],\r\n            m[0] * other[2] + m[1] * other[5] + m[2] * other[8],\r\n\r\n            m[3] * other[0] + m[4] * other[3] + m[5] * other[6],\r\n            m[3] * other[1] + m[4] * other[4] + m[5] * other[7],\r\n            m[3] * other[2] + m[4] * other[5] + m[5] * other[8],\r\n\r\n            m[6] * other[0] + m[7] * other[3] + m[8] * other[6],\r\n            m[6] * other[1] + m[7] * other[4] + m[8] * other[7],\r\n            m[6] * other[2] + m[7] * other[5] + m[8] * other[8]\r\n        ]);\r\n    }\r\n\r\n    public multiply(other: Matrix2D): Matrix2D {\r\n        return this.multiplyArray(other.getElements());\r\n    }\r\n\r\n    public translate(vector: Vector2D): Matrix2D {\r\n        return this.multiplyArray([1, 0, 0, 0, 1, 0, vector.x, vector.y, 1]);\r\n    }\r\n\r\n    public scale(kx: number, ky: number): Matrix2D {\r\n        return this.multiplyArray([kx, 0, 0, 0, ky, 0, 0, 0, 1]);\r\n    }\r\n\r\n    public rotate(deg: number): Matrix2D {\r\n        var angle = deg * Math.PI / 180;\r\n        var ca = Math.cos(angle);\r\n        var sa = Math.sin(angle);\r\n        return this.multiplyArray([ca, sa, 0, -sa, ca, 0, 0, 0, 1]);\r\n    }\r\n\r\n    public reverse(): Matrix2D {\r\n        var m = this.m;\r\n        var det = this.determinant();\r\n\r\n        var ux = m[0];\r\n        var uy = m[3];\r\n        var uz = m[6];\r\n\r\n        var vx = m[1];\r\n        var vy = m[4];\r\n        var vz = m[7];\r\n\r\n        var wx = m[2];\r\n        var wy = m[5];\r\n        var wz = m[8];\r\n\r\n        var c11 = (vy * wz - wy * vz) / det;\r\n        var c12 = (wy * uz - uy * wz) / det;\r\n        var c13 = (uy * vz - vy * uz) / det;\r\n\r\n        var c21 = (wx * vz - vx * wz) / det;\r\n        var c22 = (ux * wz - wx * uz) / det;\r\n        var c23 = (vx * uz - ux * vz) / det;\r\n\r\n        var c31 = (vx * wy - wx * vy) / det;\r\n        var c32 = (wx * uy - ux * wy) / det;\r\n        var c33 = (ux * vy - vx * uy) / det;\r\n\r\n        return new Matrix2D([c11, c21, c31, c12, c22, c32, c13, c23, c33]);\r\n    }\r\n\r\n    public getElements() {\r\n        return this.m.slice(0);\r\n    }\r\n\r\n    private roundFloat(v) {\r\n        return Math.round(v * 1e8) / 1e8;\r\n    }\r\n\r\n    public getTransformExpression() {\r\n        var self = this;\r\n        var m = self.m;\r\n        return `matrix(${self.roundFloat(m[0])}, ${self.roundFloat(m[1])}, ${self.roundFloat(m[3])}, ${self.roundFloat(m[4])}, ${self.roundFloat(m[6])}, ${self.roundFloat(m[7])})`;\r\n    }\r\n\r\n}\r\n","class Vector2D {\r\n\r\n    public x: number;\r\n    public y: number;\r\n\r\n    constructor(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    };\r\n\r\n    public sub(other: Vector2D) {\r\n        return new Vector2D(this.x - other.x, this.y - other.y);\r\n    };\r\n\r\n    public add(other: Vector2D) {\r\n        return new Vector2D(this.x + other.x, this.y + other.y);\r\n    };\r\n\r\n    public mul(val: number) {\r\n        return new Vector2D(this.x * val, this.y * val);\r\n    };\r\n\r\n    public rotateClockwise90() {\r\n        return new Vector2D(this.y, -this.x);\r\n    };\r\n\r\n    public rotateCounterClockwise90() {\r\n        return new Vector2D(-this.y, this.x);\r\n    };\r\n\r\n    public changeLength(val: number) {\r\n        var len = this.length();\r\n        if (!len) len = 1;\r\n        return this.mul(val / len);\r\n    };\r\n\r\n    public normalize() {\r\n        return this.changeLength(1);\r\n    }\r\n\r\n    public toString() {\r\n        return `{${this.x}, ${this.y}}`;\r\n    };\r\n\r\n}","///<reference path=\"jquery.d.ts\" />\r\n///<reference path=\"matrix-2d.ts\" />\r\n///<reference path=\"vector-2d.ts\" />\r\n\r\nnamespace FlipJs {\r\n\r\n    export class Corner {\r\n\r\n        private $container: IJQueryNodes;\r\n        private touchPointA: Vector2D;\r\n\r\n        private screenHeight: number;\r\n        private screenWidth: number;\r\n        private pageHeight: number;\r\n        private pageWidth: number;\r\n\r\n        public pagesDelta: number;\r\n\r\n        public globalToLocalMatrix: Matrix2D;\r\n        public localToGlobalMatrix: Matrix2D;\r\n\r\n        public localToTextureMatrix: Matrix2D;\r\n        public textureToLocalMatrix: Matrix2D;\r\n\r\n\r\n        public spinePointA: Vector2D;\r\n        public spinePointB: Vector2D;\r\n\r\n        constructor($container: IJQueryNodes, cornerType: string) {\r\n            this.$container = $container;\r\n            var $scaler = $container.find('.scaler');\r\n\r\n            this.screenHeight = $scaler.height();\r\n            this.screenWidth = $scaler.width();\r\n            var pageHeight = this.screenHeight;\r\n            var pageWidth = this.screenWidth / 2;\r\n            this.pageHeight = pageHeight;\r\n            this.pageWidth = pageWidth;\r\n\r\n            this.globalToLocalMatrix = this.getCornerMatrix(cornerType);\r\n            this.localToGlobalMatrix = this.globalToLocalMatrix.reverse();\r\n\r\n            this.localToTextureMatrix = this.getLocalToTextureMatrix(cornerType);\r\n            this.textureToLocalMatrix = this.localToTextureMatrix.reverse();\r\n\r\n\r\n            this.spinePointA = new Vector2D(pageWidth, 0);\r\n            this.spinePointB = new Vector2D(pageWidth, pageHeight);\r\n\r\n            this.pagesDelta = this.getCornerShift(cornerType);\r\n\r\n        }\r\n\r\n        public setLocalPointA(point: Vector2D) {\r\n            point = this.fixPointA(point);\r\n\r\n            this.touchPointA = point;\r\n        }\r\n\r\n        public setGlobalPointA(point: Vector2D) {\r\n            this.setLocalPointA(this.globalToLocalMatrix.transformVector(point));\r\n        }\r\n\r\n        public getPoint() {\r\n            return this.touchPointA;\r\n        }\r\n\r\n        public localToGlobal(vector: Vector2D) {\r\n            return this.localToGlobalMatrix.transformVector(vector);\r\n        }\r\n\r\n        public textureToLocal(vector: Vector2D) {\r\n            vector = this.textureToLocalMatrix.transformVector(vector);\r\n            return vector;\r\n        }\r\n\r\n        public textureToGlobal(vector: Vector2D) {\r\n            vector = this.textureToLocalMatrix.transformVector(vector);\r\n            vector = this.localToGlobalMatrix.transformVector(vector);\r\n            return vector;\r\n        }\r\n\r\n        public calculateFold(): IFold {\r\n            var pointA = this.touchPointA;\r\n            var pageWidth = this.pageWidth;\r\n            var pageHeight = this.pageHeight;\r\n\r\n            var pointM = pointA.mul(0.5);\r\n            var symmetryLine = pointM.rotateClockwise90(); // starts at pointM and goes to both directions\r\n\r\n            var foldA: Vector2D;\r\n            if (symmetryLine.y != 0) {\r\n                var ka = -pointM.y / symmetryLine.y;\r\n                foldA = pointM.add(symmetryLine.mul(ka));\r\n            } else {\r\n                foldA = new Vector2D(pointM.x, 0);\r\n            }\r\n\r\n            var pointB: Vector2D;\r\n            if (foldA.x == pointA.x && foldA.y == pointA.y) {\r\n                pointB = pointA.add(new Vector2D(0, pageHeight));\r\n            } else {\r\n                pointB = foldA.sub(pointA).rotateClockwise90().changeLength(pageHeight).add(pointA);\r\n            }\r\n\r\n            var pointC = pointA.sub(pointB).rotateClockwise90().changeLength(pageWidth).add(pointB);\r\n            var pointD = pointB.sub(pointC).rotateClockwise90().changeLength(pageHeight).add(pointC);\r\n\r\n            return {\r\n                pointA: pointA,\r\n                pointB: pointB,\r\n                pointC: pointC,\r\n                pointD: pointD,\r\n                pointE: new Vector2D(0, 0),\r\n                foldA: foldA,\r\n                foldB: this.getFoldB(pointA, pointB, pointC)\r\n            }\r\n        }\r\n\r\n        private getFoldB(pointA: Vector2D, pointB: Vector2D, pointC: Vector2D) {\r\n            var pageHeight = this.pageHeight;\r\n\r\n            var ba = pointB.sub(pointA);\r\n\r\n            if (ba.x == 0) {\r\n                return new Vector2D(pointA.x, pageHeight);\r\n            }\r\n            var kx = -pointA.x / ba.x;\r\n            if (kx >= 0 && kx <= 1) {\r\n                return ba.mul(kx).add(pointA);\r\n            }\r\n\r\n            var cb = pointC.sub(pointB);\r\n            var ky = (pageHeight - pointB.y) / cb.y;\r\n            return cb.mul(ky).add(pointB);\r\n        }\r\n\r\n\r\n        /**\r\n         * Check pointA to spine distance. We dont want page to be torn...\r\n         */\r\n        private fixPointA(pointA: Vector2D): Vector2D {\r\n            if (pointA.length() < 10) pointA = new Vector2D(0, 0);\r\n\r\n            var spinePointA = this.spinePointA;\r\n            var spinePointB = this.spinePointB;\r\n\r\n            var pageWidth = this.pageWidth;\r\n\r\n            var maxDiag = spinePointB.length();\r\n            var diag = pointA.sub(spinePointB);\r\n            if (diag.length() > maxDiag) {\r\n                diag = diag.changeLength(maxDiag);\r\n                pointA = diag.add(spinePointB);\r\n            }\r\n\r\n            var dir = pointA.sub(spinePointA);\r\n            if (dir.length() > pageWidth) {\r\n                dir = dir.changeLength(pageWidth);\r\n                pointA = dir.add(spinePointA);\r\n            }\r\n\r\n            return pointA;\r\n        }\r\n\r\n        /**\r\n         * Get global to corner local coordinate system transformation matrix\r\n         */\r\n        private getCornerMatrix(corner: string): Matrix2D {\r\n            var screenWidth = this.screenWidth;\r\n            var screenHeight = this.screenHeight;\r\n            var m = new Matrix2D();\r\n            switch (corner) {\r\n                case 'br':\r\n                    return m.translate(new Vector2D(-screenWidth, -screenHeight)).scale(-1, -1);\r\n                case 'bl':\r\n                    return m.translate(new Vector2D(0, -screenHeight)).scale(1, -1);\r\n                case 'tr':\r\n                    return m.translate(new Vector2D(-screenWidth, 0)).scale(-1, 1);\r\n                case 'tl':\r\n                    return m.translate(new Vector2D(0, 0)).scale(1, 1);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Get local to texture transform matrix\r\n         */\r\n        private getLocalToTextureMatrix(corner: string): Matrix2D {\r\n            var pageWidth = this.pageWidth;\r\n            var pageHeight = this.pageHeight;\r\n\r\n            var m = new Matrix2D();\r\n            switch (corner) {\r\n                case 'br':\r\n                    return m.scale(-1, -1).translate(new Vector2D(pageWidth, pageHeight));\r\n                case 'tr':\r\n                    return m.scale(-1, 1).translate(new Vector2D(pageWidth, 0));\r\n                case 'bl':\r\n                    return m.scale(1, -1).translate(new Vector2D(0, pageHeight));\r\n                case 'tl':\r\n                    return m.scale(1, 1).translate(new Vector2D(0, 0));\r\n            }\r\n        }\r\n\r\n\r\n        private getCornerShift(corner: string): number {\r\n            switch (corner) {\r\n                case 'br':\r\n                case 'tr':\r\n                    return 2;\r\n                case 'bl':\r\n                case 'tl':\r\n                    return -2;\r\n            }\r\n\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n}","///<reference path=\"vector-2d.ts\" />\r\n///<reference path=\"jquery.d.ts\" />\r\n\r\ninterface IDragArgs {\r\n\r\n    $handle: IJQueryNodes;\r\n\r\n    vector: Vector2D;\r\n\r\n    rel: Vector2D;\r\n\r\n    event: IJQueryEvent;\r\n\r\n}\r\n\r\ninterface IDraggable {\r\n\r\n    start(args: IDragArgs);\r\n\r\n    move(args: IDragArgs);\r\n\r\n    stop(args: IDragArgs);\r\n\r\n    cancel(args: IDragArgs);\r\n    \r\n}","///<reference path=\"matrix-2d.ts\" />\r\n///<reference path=\"vector-2d.ts\" />\r\n///<reference path=\"draggable.ts\" />\r\n\r\nnamespace FlipJs {\r\n\r\n    export class DraggableFold implements IDraggable {\r\n\r\n        public start(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public move(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public stop(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public cancel(args: IDragArgs) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","///<reference path=\"matrix-2d.ts\" />\r\n///<reference path=\"vector-2d.ts\" />\r\n///<reference path=\"draggable.ts\" />\r\n\r\nnamespace FlipJs {\r\n\r\n    export class DraggableZoom implements IDraggable {\r\n\r\n        public start(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public move(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public stop(args: IDragArgs) {\r\n\r\n        }\r\n\r\n        public cancel(args: IDragArgs) {\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","///<reference path=\"jquery.d.ts\" />\r\n///<reference path=\"flipper.d.ts\" />\r\n\r\n$(document).ready(() => {\r\n\r\n    var regex = /#magazine:(\\d+)/i;\r\n    \r\n    function refresh() {\r\n        var hash = window.location.hash || '#';\r\n        var res = regex.exec(hash);\r\n        var $pageTurn = $('.page-turn.hash');\r\n        if (res) {\r\n            var pageNumber = parseInt(res[1], 10);\r\n            var pageTurn = $pageTurn.pageTurn();\r\n            pageTurn.navigate(pageNumber);\r\n        }\r\n        $pageTurn.toggleClass('opened', !!res);\r\n    }\r\n\r\n    $(window).bind('hashchange', () => {\r\n        refresh();\r\n    });\r\n\r\n    refresh();\r\n\r\n    $('body').on('page-change', '.page-turn', (ev, pageNumber) => {\r\n        window.location.hash = `#magazine:${pageNumber}`;\r\n    })\r\n\r\n});","///<reference path=\"vector-2d.ts\" />\r\n\r\ninterface IFold {\r\n\r\n    //Fold point on horizontal axis\r\n    foldA: Vector2D;\r\n\r\n    //Second fold point\r\n    foldB: Vector2D;\r\n\r\n\r\n    /**\r\n     * Touch corner position\r\n     */\r\n    pointA: Vector2D;\r\n\r\n    pointB: Vector2D;\r\n\r\n    pointC: Vector2D;\r\n\r\n    pointD: Vector2D;\r\n    \r\n    /**\r\n     * Original corner position (0, 0)\r\n     */\r\n    pointE: Vector2D;\r\n    \r\n}","///<reference path=\"matrix-2d.ts\" />\r\n///<reference path=\"vector-2d.ts\" />\r\n///<reference path=\"fold.ts\" />\r\n///<reference path=\"jquery.d.ts\" />\r\n///<reference path=\"flipper.d.ts\" />\r\n///<reference path=\"draggable.ts\" />\r\n///<reference path=\"draggable-zoom.ts\" />\r\n///<reference path=\"draggable-fold.ts\" />\r\n///<reference path=\"corner.ts\" />\r\n\r\n$.fn.pageTurn = function () {\r\n\r\n    var DraggableZoom = FlipJs.DraggableZoom;\r\n    var DraggableFold = FlipJs.DraggableFold;\r\n\r\n    function init($container: IJQueryNodes): IFlipperControl {\r\n        var $scaler = $container.find('.scaler');\r\n        var $pages = $container.find('.pages');\r\n        var $zoomNode = $container.find('.page-turn-magnifier');\r\n        var $toolbarPage = $container.find('.page-turn-toolbar input');\r\n\r\n        var corner: FlipJs.Corner;\r\n\r\n        /** Front side of page being folded */\r\n        var $frontPage: IJQueryNodes;\r\n        var $frontPageImg: IJQueryNodes;\r\n\r\n        /** Back side of page being folded */\r\n        var $backPage: IJQueryNodes;\r\n        var $backPageImg: IJQueryNodes;\r\n\r\n        var touchCorner = '';\r\n\r\n        var zoomValue = 1;\r\n        var zoomK = 1.5;\r\n        var zoomShift = new Vector2D(0, 0);\r\n\r\n        var animationSemaphore = false;\r\n\r\n        var screenHeight = $scaler.height();\r\n        var screenWidth = $scaler.width();\r\n        var pageHeight = screenHeight;\r\n        var pageWidth = screenWidth / 2;\r\n\r\n        function buildPreview() {\r\n            var $preview = $container.find('div.preview');\r\n            if (!$preview.length) {\r\n                $preview = $('<div class=\"preview\"><ol></ol></div>');\r\n                $container.append($preview);\r\n            }\r\n            var $ol = $preview.find('ol');\r\n            $ol.empty();\r\n            var page = 0;\r\n            $pages.find('li').each((index, node) => {\r\n                var $node = $(node);\r\n                if (!$node.hasClass('empty')) {\r\n                    page++;\r\n                }\r\n                var $originalImg = $node.find('img');\r\n                var url = $originalImg.attr('data-preview-src') || $originalImg.attr('src');\r\n                var $img = $('<img />').attr('src', url);\r\n                var $li = $('<li></li>');\r\n                var $a = $('<a></a>').attr('href', `#magazine:${page}`).append($img);\r\n                $li.append($a);\r\n                $ol.append($li);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Get corner type by jquery node\r\n         */\r\n        function getCornerType($corner: IJQueryNodes): string {\r\n            if ($corner.hasClass('corner-br')) {\r\n                return 'br';\r\n            } else if ($corner.hasClass('corner-bl')) {\r\n                return 'bl';\r\n            } else if ($corner.hasClass('corner-tr')) {\r\n                return 'tr';\r\n            } else if ($corner.hasClass('corner-tl')) {\r\n                return 'tl';\r\n            } else {\r\n                return '';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get back side of page being fold\r\n         */\r\n        function getBackPage(corner: string): IJQueryNodes {\r\n            switch (corner) {\r\n                case 'br':\r\n                case 'tr':\r\n                    return $pages.find('.page3');\r\n                case 'bl':\r\n                case 'tl':\r\n                    return $pages.find('.page2');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get front side of page being fold\r\n         */\r\n        function getFrontPage(corner: string): IJQueryNodes {\r\n            switch (corner) {\r\n                case 'br':\r\n                case 'tr':\r\n                    return $pages.find('.page2');\r\n                case 'bl':\r\n                case 'tl':\r\n                    return $pages.find('.page3');\r\n            }\r\n        }\r\n\r\n        function initCorner(cornerType: string) {\r\n            corner = new FlipJs.Corner($container, cornerType);\r\n            screenHeight = $scaler.height();\r\n            screenWidth = $scaler.width();\r\n            pageHeight = screenHeight;\r\n            pageWidth = screenWidth / 2;\r\n\r\n            var $pageA = getPageA();\r\n            var $pageB = getPageB();\r\n            switch (cornerType) {\r\n                case 'tr':\r\n                case 'br':\r\n                    if ($pageB.next('li:not(.empty)').length) {\r\n                        cleanPages();\r\n                        $pageA.addClass('page1');\r\n                        $pageB.addClass('page2').next('li').addClass('page3').next('li').addClass('page4');\r\n                    }\r\n                    break;\r\n                case 'tl':\r\n                case 'bl':\r\n                    if ($pageA.prev('li:not(.empty)').length) {\r\n                        cleanPages();\r\n                        $pageA.next('li').addClass('page4').prev('li').addClass('page3').prev('li').addClass('page2').prev('li').addClass('page1');\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            $frontPage = getFrontPage(cornerType);\r\n            $backPage = getBackPage(cornerType);\r\n\r\n            $frontPageImg = $frontPage.find('img');\r\n            $backPageImg = $backPage.find('img');\r\n\r\n            touchCorner = cornerType;\r\n            var touchDelta = corner.pagesDelta;\r\n\r\n            $container.toggleClass('active', !!touchDelta).toggleClass('active-next', touchDelta > 0).toggleClass('active-prev', touchDelta < 0);\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * Easing function\r\n         * @param t Time from 0 to 1\r\n         */\r\n        function easeInOutCubic(t: number, b: number, c: number, d: number): number {\r\n            t /= d / 2;\r\n            if (t < 1) return c / 2 * t * t * t + b;\r\n            t -= 2;\r\n            return c / 2 * (t * t * t + 2) + b;\r\n        };\r\n\r\n        (function () {\r\n            var mouseDownStart: Vector2D;\r\n            var state = 'init';\r\n            var $handle: IJQueryNodes;\r\n\r\n            var dragging = null;\r\n            var draggingPreview = null;\r\n\r\n            function getMousePosition(ev: IJQueryEvent): Vector2D {\r\n                if (ev.type.indexOf('touch') >= 0) {\r\n                    var touchEvent = <TouchEvent>ev.originalEvent\r\n                    var touch = touchEvent.touches[0] || touchEvent.changedTouches[0];\r\n                    return new Vector2D(touch.clientX, touch.clientY);\r\n                }\r\n                return new Vector2D(ev.clientX, ev.clientY);\r\n            }\r\n\r\n            function checkThreshold(a: Vector2D, b: Vector2D): boolean {\r\n                return a.sub(b).length() > 5;\r\n            }\r\n\r\n            function createDragArgs(ev: IJQueryEvent): IDragArgs {\r\n                var pos = getMousePosition(ev);\r\n                var rect = $scaler[0].getBoundingClientRect();\r\n                var start = new Vector2D(rect.left, rect.top);\r\n                return {\r\n                    rel: pos.sub(start),\r\n                    vector: pos.sub(mouseDownStart),\r\n                    $handle: $handle,\r\n                    event: ev\r\n                };\r\n            }\r\n\r\n            function dragStart(ev: IJQueryEvent) {\r\n                var args = createDragArgs(ev);\r\n\r\n                dragging = {\r\n                    zoom: zoom(),\r\n                };\r\n\r\n                if (dragging.zoom) {\r\n\r\n                } else {\r\n                    dragStartFold(args);\r\n                }\r\n\r\n                draggingPreview = null;\r\n                return true;\r\n            }\r\n\r\n            function dragStartFold(args: IDragArgs) {\r\n                var corner = getCornerType(args.$handle);\r\n                initCorner(corner);\r\n            }\r\n\r\n            function dragMove(ev: IJQueryEvent) {\r\n                if (dragging) {\r\n                    var args = createDragArgs(ev);\r\n                    if (dragging.zoom) {\r\n                        dragMoveZoom(args);\r\n                    } else {\r\n                        dragMoveFold(args);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function dragMoveZoom(args: IDragArgs) {\r\n                var m = new Matrix2D().scale(zoomValue, zoomValue).translate(zoomShift).translate(args.vector);\r\n                $zoomNode.css('transform', m.getTransformExpression());\r\n            }\r\n\r\n            function dragMoveFold(args: IDragArgs) {\r\n                corner.setGlobalPointA(args.rel);\r\n                refresh();\r\n            }\r\n\r\n            function dragAnimate(target: Vector2D) {\r\n                var start = corner.getPoint();\r\n                var delta = target.sub(start);\r\n                return animate((stage: number) => {\r\n                    var vector = delta.mul(stage).add(start);\r\n                    corner.setLocalPointA(vector);\r\n                    refresh();\r\n                }).done(() => {\r\n                    cleanPages();\r\n                    clean();\r\n                });\r\n            }\r\n\r\n            function dragEnd(ev: IJQueryEvent) {\r\n                if (dragging) {\r\n                    if (dragging.zoom) {\r\n                        dragEndZoom(ev);\r\n                    } else {\r\n                        dragEndFold(ev);\r\n                    }\r\n                    dragging = null;\r\n                }\r\n            }\r\n\r\n            function dragEndZoom(ev: IJQueryEvent) {\r\n                var args = createDragArgs(ev);\r\n                zoomShift = zoomShift.add(args.vector);\r\n            }\r\n\r\n            function dragEndFold(ev: IJQueryEvent) {\r\n                var touchPointA = corner.getPoint();\r\n                if (touchPointA.x > pageWidth) {\r\n                    dragAnimate(new Vector2D(screenWidth, 0)).done(() => {\r\n                        shiftCurrent(corner.pagesDelta);\r\n                    });\r\n                } else {\r\n                    dragCancel(ev);\r\n                }\r\n            }\r\n\r\n            function dragCancel(ev: IJQueryEvent) {\r\n                if (dragging) {\r\n                    dragAnimate(new Vector2D(0, 0));\r\n                    dragging = null;\r\n                }\r\n            }\r\n\r\n            function dragCheck(ev: IJQueryEvent, canCancel: boolean): any {\r\n                if (state === 'drag') {\r\n                    if (canCancel) {\r\n                        ev.preventDefault();\r\n                        ev.stopPropagation();\r\n                    }\r\n                    return dragMove(ev);\r\n                } else if (state === 'threshold') {\r\n                    var pos = getMousePosition(ev);\r\n                    if (checkThreshold(mouseDownStart, pos)) {\r\n                        state = 'drag';\r\n                        var res = dragStart(ev);\r\n                        if (!res) state = 'init';\r\n                        return res;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n\r\n            $('html, body').on('mousedown touchstart', '.page-turn .corner', (ev: IJQueryEvent) => {\r\n                var $evtarget = $(ev.target);\r\n                if (state === 'init') {\r\n                    mouseDownStart = getMousePosition(ev);\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    state = 'threshold';\r\n                    $handle = $evtarget.closest('.corner');\r\n                }\r\n            }).on('mousemove touchmove', '.page-turn .corner', (ev: IJQueryEvent) => {\r\n                if (dragging || zoom()) return;\r\n                draggingPreview = {};\r\n                mouseDownStart = new Vector2D(-100, -100);\r\n                $handle = $(ev.target).closest('.corner');\r\n                var args = createDragArgs(ev);\r\n                var corner = getCornerType(args.$handle);\r\n                initCorner(corner);\r\n                dragMoveFold(args);\r\n            }).on('mouseout touchend', '.page-turn .corner', (ev: IJQueryEvent) => {\r\n                if (!draggingPreview) return;\r\n                draggingPreview = null;\r\n                dragAnimate(new Vector2D(0, 0));\r\n            }).on('mousedown touchstart', '.page-turn.zoom-in .page-turn-magnifier', (ev: IJQueryEvent) => {\r\n                var $evtarget = $(ev.target);\r\n                if (state === 'init') {\r\n                    mouseDownStart = getMousePosition(ev);\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    state = 'threshold';\r\n                    $handle = $evtarget.closest('.page-turn');\r\n                }\r\n            }).bind('mousemove touchmove', (ev: IJQueryEvent) => {\r\n                return dragCheck(ev, true);\r\n            }).bind('mousewheel', function (ev: IJQueryEvent) {\r\n                return dragCheck(ev, false);\r\n            }).bind('mouseup touchend', (ev: IJQueryEvent) => {\r\n                if (state === 'drag') {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    dragEnd(ev);\r\n                } else if (state === 'threshold') {\r\n                    $handle = $(ev.target).closest('.corner');\r\n                    if ($handle.length) {\r\n                        animateArrow(getCornerType($handle));\r\n                    }\r\n                }\r\n                state = 'init';\r\n            }).bind('click', '.page-turn .corner', (ev: IJQueryEvent) => {\r\n            }).bind('keydown', (ev: IJQueryEvent) => {\r\n                if (!dragging) return;\r\n\r\n                if (ev.keyCode === 27) {      //escape\r\n                    dragCancel(ev);\r\n                }\r\n            });\r\n\r\n        })();\r\n\r\n        /**\r\n         * Get touch point vector during auto-animation. Fold point x and Fold angle is animated.\r\n         * @param stage Number from 0 to 1.\r\n         */\r\n        function getPointAFromStage(stage: number): Vector2D {\r\n            var angle = 45 + 45 * stage; //symmetry line angle changes from 45 to 90.\r\n            angle = angle * Math.PI / 180;\r\n\r\n            var fx = stage * pageWidth;\r\n            var fy = 0;\r\n\r\n            var foldA = new Vector2D(fx, fy);\r\n\r\n            var dpl = fx * Math.cos(angle);\r\n            var dpx = dpl * Math.cos(angle);\r\n            var dpy = dpl * Math.sin(angle);\r\n\r\n            var pointM = new Vector2D(fx - dpx, dpy);\r\n\r\n            return pointM.mul(2);\r\n        }\r\n\r\n        function dumpFold(localFold: IFold) {\r\n            function debugPoint($point: IJQueryNodes, vector: Vector2D) {\r\n                vector = corner.localToGlobal(vector);\r\n                $point.css({\r\n                    left: (100 * vector.x / screenWidth) + '%',\r\n                    top: (100 * vector.y / screenHeight) + '%'\r\n                })\r\n            }\r\n\r\n            debugPoint($('.fold-point-A'), localFold.foldA);\r\n            debugPoint($('.fold-point-B'), localFold.foldB);\r\n            debugPoint($('.point-a'), localFold.pointA);\r\n            debugPoint($('.point-b'), localFold.pointB);\r\n            debugPoint($('.point-c'), localFold.pointC);\r\n            debugPoint($('.point-d'), localFold.pointD);\r\n            debugPoint($('.point-e'), localFold.pointE);\r\n        }\r\n\r\n        function getOuterClipMatrix(pointO: Vector2D, pointU: Vector2D, pointV: Vector2D): Matrix2D {\r\n            var clipX = pointU.sub(pointO).mul(1 / pageWidth);\r\n            var clipY = pointV.sub(pointO).mul(1 / pageHeight);\r\n            return new Matrix2D([clipX.x, clipX.y, 0, clipY.x, clipY.y, 0, 0, 0, 1]).translate(pointO);\r\n        }\r\n\r\n        /**\r\n         * Get trapezoid clipper matrix.\r\n         */\r\n        function getTrapezoidClipperMatrix(pointO: Vector2D, pointU: Vector2D, pointV: Vector2D, pointW: Vector2D): Matrix2D {\r\n            var axisX = pointU.sub(pointO);\r\n            var axisY = pointV.sub(pointO);\r\n            var dirX = axisX.normalize();\r\n            var dirY = axisY.normalize();\r\n            var axisMatrix = new Matrix2D([dirX.x, dirX.y, 0, dirY.x, dirY.y, 0, 0, 0, 1]);\r\n\r\n            //make sure pointW is included into the matrix\r\n            var matrix = axisMatrix.translate(pointO);\r\n            var reverse = matrix.reverse();\r\n            var checkPoint = reverse.transformVector(pointW);\r\n\r\n            var kx = checkPoint.x / axisX.length();\r\n            var ky = checkPoint.y / axisY.length();\r\n            var k = Math.max(kx, ky, 1);\r\n            return axisMatrix.scale(k, k).translate(pointO);\r\n        }\r\n\r\n        /**\r\n         * Setups page using page martix and clipper matrix\r\n         * @param pageMatrix Page matrix in corner local coordinate system\r\n         * @param clipperMatrix Clipper matrix in corner local coordinate system\r\n         */\r\n        function setupPage($page: IJQueryNodes, $img: IJQueryNodes, pageMatrix: Matrix2D, clipperMatrix: Matrix2D) {\r\n            pageMatrix = pageMatrix.multiply(corner.localToGlobalMatrix);\r\n            clipperMatrix = clipperMatrix.multiply(corner.localToGlobalMatrix);\r\n\r\n            $page.css('transform', clipperMatrix.getTransformExpression());\r\n\r\n            pageMatrix = pageMatrix.multiply(clipperMatrix.reverse()); //compensate clipper matrix\r\n\r\n            $img.css('transform', pageMatrix.getTransformExpression());\r\n        }\r\n\r\n        function getPageMatrix(fold: IFold) {\r\n            var pageXAxis = fold.pointA.sub(fold.pointD).normalize();\r\n            var pageYAxis = fold.pointC.sub(fold.pointD).normalize();\r\n            var pageMatrix = new Matrix2D([pageXAxis.x, pageXAxis.y, 0, pageYAxis.x, pageYAxis.y, 0, 0, 0, 1]).translate(fold.pointD);\r\n\r\n            return corner.textureToLocalMatrix.multiply(pageMatrix);\r\n        }\r\n\r\n        function setupBackPage(localFold: IFold) {\r\n            var pageMatrix = getPageMatrix(localFold);\r\n\r\n            var clipperMatrix: Matrix2D;\r\n            if (localFold.foldA.x > localFold.foldB.x) { //triangle or trapezoid?\r\n                clipperMatrix = getOuterClipMatrix(localFold.foldA, localFold.pointA, localFold.foldB);\r\n            } else {\r\n                clipperMatrix = getOuterClipMatrix(localFold.foldB, localFold.pointB, localFold.foldA);\r\n            }\r\n\r\n            setupPage($backPage, $backPageImg, pageMatrix, clipperMatrix);\r\n        }\r\n\r\n        function setupFrontPage(localFold: IFold) {\r\n            var shift = corner.textureToGlobal(new Vector2D(0, 0));\r\n            var pageMatrix = new Matrix2D().translate(shift).multiply(corner.globalToLocalMatrix);\r\n\r\n            var spineA = corner.spinePointA.mul(2); //Scale it by any number >1 to avoid zero axis length\r\n            var spineB = corner.spinePointB.mul(2); //Scale it by any number >1 to avoid zero axis length\r\n            var clipperMatrix: Matrix2D;\r\n            if (localFold.foldA.x > localFold.foldB.x) { //triangle or trapezoid?\r\n                clipperMatrix = getTrapezoidClipperMatrix(localFold.foldA, spineA, localFold.foldB, spineB);\r\n            } else {\r\n                clipperMatrix = getTrapezoidClipperMatrix(localFold.foldB, spineB, localFold.foldA, spineA);\r\n            }\r\n\r\n            setupPage($frontPage, $frontPageImg, pageMatrix, clipperMatrix);\r\n        }\r\n\r\n        function refresh() {\r\n            var localFold = corner.calculateFold();\r\n\r\n            setupBackPage(localFold);\r\n            setupFrontPage(localFold);\r\n\r\n            // dumpFold(localFold);\r\n        }\r\n\r\n        function cleanPages() {\r\n            return $pages.find('li').removeClass('page1 page2 page3 page4')\r\n        }\r\n\r\n        function clean() {\r\n            $container.removeClass('active');\r\n            $pages.find('li').css('transform', '').find('img').css('transform', '');\r\n        }\r\n\r\n        function isOneSideLeftPage() {\r\n            return $container.hasClass('one-side-left');\r\n        }\r\n\r\n        function isOneSideRightPage() {\r\n            return $container.hasClass('one-side-right');\r\n        }\r\n\r\n        function getOneSidePage() {\r\n            if (isOneSideLeftPage()) {\r\n                return $pages.children('li.page-a');\r\n            } else if (isOneSideRightPage()) {\r\n                return $pages.children('li.page-b');\r\n            } else {\r\n                return $({});\r\n            }\r\n        }\r\n\r\n        function hasPageBefore($page: IJQueryNodes) {\r\n            var $prev = $page.prev('li');\r\n            return isPage($prev);\r\n        }\r\n\r\n        function hasPageAfter($page: IJQueryNodes) {\r\n            var $next = $page.next('li');\r\n            return isPage($next);\r\n        }\r\n\r\n        function getPageA() {\r\n            return $pages.children('li.page-a');\r\n        }\r\n\r\n        function getPageB() {\r\n            return $pages.children('li.page-b');\r\n        }\r\n\r\n        function isPage($page: IJQueryNodes) {\r\n            if (!$page.length) return false;\r\n            return !$page.hasClass('empty');\r\n        }\r\n\r\n        function refreshState() {\r\n            var $pageA = getPageA();\r\n            var $pageB = getPageB();\r\n            var $currentOne = getOneSidePage();\r\n            $container.toggleClass('can-prev-2', hasPageBefore($pageA));\r\n            $container.toggleClass('can-next-2', hasPageAfter($pageB));\r\n            $container.toggleClass('can-prev', hasPageBefore($currentOne));\r\n            $container.toggleClass('can-next', hasPageAfter($currentOne));\r\n\r\n            var twoSides = isPage($pageA) && isPage($pageB);\r\n            $container.toggleClass('two-sides', twoSides)\r\n\r\n            var pageNum = getPageNumber();\r\n            $toolbarPage.val(pageNum.toString());\r\n            preloadImages();\r\n        }\r\n\r\n        function getPageNumber(): number {\r\n            var $items = $pages.children('li:not(.empty)');\r\n            var oneSideLeft = isOneSideLeftPage();\r\n            for (var n = 0; n < $items.length; n++) {\r\n                var $page = $($items[n]);\r\n                if ($page.hasClass('page-a')) {\r\n                    return n + (oneSideLeft ? 1 : 2);\r\n                } else if ($page.hasClass('page-b')) {\r\n                    return n + 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        function shiftCurrent(delta: number) {\r\n            var pn = getPageNumber();\r\n            navigate(pn + delta);\r\n        }\r\n\r\n        function animate(callback: { (stage: number) }) {\r\n            var promise = $.Deferred();\r\n            if (animationSemaphore) {\r\n                promise.reject();\r\n                return promise;\r\n            }\r\n\r\n            animationSemaphore = true;\r\n\r\n            $container.addClass('animating');\r\n            var frame = 0;\r\n            var step = 4;\r\n\r\n            callback(0);\r\n\r\n            function draw() {\r\n                requestAnimationFrame(() => {\r\n                    frame += step;\r\n                    frame = Math.min(frame, 100);\r\n                    var x = easeInOutCubic(frame / 100, 0, 1, 1);\r\n                    callback(x)\r\n                    if (frame < 100) {\r\n                        draw();\r\n                    } else {\r\n                        animationSemaphore = false;\r\n                        $container.removeClass('animating');\r\n                        promise.resolve();\r\n                    }\r\n                });\r\n            }\r\n\r\n            draw();\r\n\r\n            return promise;\r\n        }\r\n\r\n        function animateArrow(cornerType: string) {\r\n            initCorner(cornerType);\r\n            animate(stage => {\r\n                var pointA = getPointAFromStage(stage);\r\n                corner.setLocalPointA(pointA);\r\n                refresh();\r\n            }).done(() => {\r\n                cleanPages();\r\n                clean();\r\n                shiftCurrent(corner.pagesDelta);\r\n            });\r\n        }\r\n\r\n        function preloadImages() {\r\n            preloadNextImages();\r\n            preloadPrevImages();\r\n        }\r\n\r\n        var preloaders = {};\r\n\r\n        function preloadImage($img: IJQueryNodes) {\r\n            if (!$img.length) return;\r\n            var imgNode = <HTMLImageElement>$img[0];\r\n            var src = imgNode.src;\r\n            var img = new Image()\r\n            img.src = src;\r\n            img.onload = function () {\r\n                console.log(src);\r\n            }\r\n            preloaders[src] = img;\r\n        }\r\n\r\n        function preloadNextImages() {\r\n            var $current = $pages.children('li.page-a');\r\n            for (var i = 0; i < 3; i++) {\r\n                $current = $current.next('li');\r\n                var $img = $current.find('img');\r\n                preloadImage($img);\r\n            }\r\n        }\r\n\r\n        function preloadPrevImages() {\r\n            var $current = $pages.children('li.page-a');\r\n            for (var i = 0; i < 3; i++) {\r\n                $current = $current.prev('li');\r\n                var $img = $current.find('img');\r\n                preloadImage($img);\r\n            }\r\n        }\r\n\r\n        function animateFlipForward() {\r\n            var $newBase = $pages.children('li.page-b').next('li');\r\n            if ($newBase.length) {\r\n                if (!zoom()) {\r\n                    animateArrow('br');\r\n                } else {\r\n                    shiftCurrent(2);\r\n                }\r\n            }\r\n        }\r\n\r\n        function animateFlipBackward() {\r\n            var $newBase = $pages.children('li.page-a').prev('li');\r\n            if ($newBase.length) {\r\n                if (!zoom()) {\r\n                    animateArrow('bl');\r\n                } else {\r\n                    shiftCurrent(-2);\r\n                }\r\n            }\r\n        }\r\n\r\n        function getMaxPage() {\r\n            return $pages.children('li:not(.empty)').length;\r\n        }\r\n\r\n        function navigate(pageNumber: number) {\r\n            var $items = $pages.children('li');\r\n            var maxPage = getMaxPage();\r\n            pageNumber = Math.min(Math.max(1, pageNumber), maxPage);\r\n            var page = 0;\r\n            for (var i = 0; i < $items.length; i++) {\r\n                var $page = $($items[i]);\r\n                if (!$page.hasClass('empty')) {\r\n                    page++;\r\n                }\r\n                var pageA = (page % 2 == 0) && (page == pageNumber || (page + 1) == pageNumber);\r\n                var pageB = (page % 2 == 1) && ((page - 1) == pageNumber || page == pageNumber);\r\n                $page.toggleClass('page-a', pageA);\r\n                $page.toggleClass('page-b', pageB);\r\n            }\r\n            var left = pageNumber % 2 == 0;\r\n            $container.toggleClass('one-side-left', left);\r\n            $container.toggleClass('one-side-right', !left);\r\n            refreshState();\r\n            $container.trigger('page-change', [getPageNumber()]);\r\n\r\n            $container.toggleClass('first', pageNumber == 1);\r\n            $container.toggleClass('last', pageNumber >= maxPage);\r\n        }\r\n\r\n        function close() {\r\n            window.location.hash = '#';\r\n        }\r\n\r\n        function zoom() {\r\n            return $container.hasClass('zoom-in');\r\n        }\r\n\r\n        function setZoom() {\r\n            zoomShift = new Vector2D(0, 0);\r\n            var m = new Matrix2D().scale(zoomValue, zoomValue);\r\n            $zoomNode.css('transform', m.getTransformExpression());\r\n            $container.toggleClass('zoom-in', zoomValue > 1);\r\n        }\r\n\r\n        function zoomIn() {\r\n            zoomValue *= zoomK;\r\n            setZoom();\r\n        }\r\n\r\n        function zoomOut() {\r\n            zoomValue /= zoomK;\r\n            setZoom();\r\n        }\r\n\r\n        function toggleZoom() {\r\n            if (zoom()) {\r\n                zoomValue = 1;\r\n            } else {\r\n                zoomValue = 2;\r\n            }\r\n            setZoom();\r\n        }\r\n\r\n        refreshState();\r\n\r\n        buildPreview();\r\n\r\n        return {\r\n            animateFlipBackward: animateFlipBackward,\r\n            animateFlipForward: animateFlipForward,\r\n            shiftCurrent: shiftCurrent,\r\n            navigate: navigate,\r\n            close: close,\r\n            zoomIn: zoomIn,\r\n            zoomOut: zoomOut,\r\n            toggleZoom: toggleZoom\r\n        }\r\n    }\r\n\r\n    var data = this.data('page-turn');\r\n    if (data) return data;\r\n    data = init(this);\r\n    this.data('page-turn', data);\r\n    return data;\r\n};\r\n\r\n$(document).ready(function () {\r\n    function getControl(ev: IJQueryEvent) {\r\n        return $(ev.target).closest('.page-turn').pageTurn();\r\n    }\r\n\r\n    $('body').on('dblclick', '.page-turn .page-turn-magnifier', (ev: IJQueryEvent) => {\r\n        getControl(ev).toggleZoom();\r\n    }).on('click', '.page-turn .go-next-2', (ev: IJQueryEvent) => {\r\n        getControl(ev).animateFlipForward();\r\n    }).on('click', '.page-turn .go-prev-2', (ev: IJQueryEvent) => {\r\n        getControl(ev).animateFlipBackward();\r\n    }).on('click', '.page-turn .go-next', (ev: IJQueryEvent) => {\r\n        getControl(ev).shiftCurrent(1);\r\n    }).on('click', '.page-turn .go-prev', (ev: IJQueryEvent) => {\r\n        getControl(ev).shiftCurrent(-1);\r\n    }).on('click', '.page-turn .zoom-in', (ev: IJQueryEvent) => {\r\n        getControl(ev).zoomIn();\r\n    }).on('click', '.page-turn .zoom-out', (ev: IJQueryEvent) => {\r\n        getControl(ev).zoomOut();\r\n    }).on('change', '.page-turn .go-page', (ev: IJQueryEvent) => {\r\n        var $input = $(ev.target).closest('input');\r\n        getControl(ev).navigate(parseInt($input.val(), 10));\r\n    }).on('click', '.page-turn .fullscreen', (ev: IJQueryEvent) => {\r\n        getControl(ev).toggleZoom();\r\n    }).on('click', '.page-turn .bg, .page-turn .empty', (ev: IJQueryEvent) => {\r\n        getControl(ev).close();\r\n    }).on('touchstart', '.page-turn', (ev: IJQueryEvent) => {\r\n        // if (ev.type.indexOf('touch') >= 0) {\r\n        //     var touchEvent = <TouchEvent>ev.originalEvent\r\n        //     if (touchEvent.touches.length > 1) {\r\n        //         ev.preventDefault();\r\n        //     }\r\n        // }\r\n    });\r\n});\r\n\r\n"],"sourceRoot":"/source/"}